{
  "actionable_tasks": [
    {
      "id": "task_1",
      "title": "Implement Circuit Breaker Pattern for Provider Failover",
      "description": "Add circuit breaker to backend provider switching logic to automatically failover on high error rates or latency, as derived from M2 milestone research.",
      "priority": "high",
      "estimated_time": "60-90 minutes",
      "files_to_modify": [
        "src/api/providers.js",
        "src/services/llm-provider-manager.js"
      ],
      "implementation_steps": [
        "Define circuit breaker states (closed/open/half-open) and thresholds (e.g., 5 failures in 10 requests)",
        "Implement using a simple state machine with recentLatencies array already available",
        "Add automatic failover to next healthy provider on open state",
        "Add logging and health endpoint exposure for monitoring",
        "Write 2-3 unit tests for state transitions"
      ],
      "complexity_score": 6
    },
    {
      "id": "task_2",
      "title": "Add Request Correlation IDs for Tracing",
      "description": "Implement end-to-end request correlation IDs for debugging chat pipeline and provider calls, as specified in M2.",
      "priority": "high",
      "estimated_time": "30-45 minutes",
      "files_to_modify": [
        "src/middleware/tracing.js",
        "src/api/chat.js",
        "src/services/*"
      ],
      "implementation_steps": [
        "Create middleware to generate UUID correlation ID per request",
        "Propagate ID through all LLM provider calls and log with each operation",
        "Expose ID in API responses and frontend console for debugging",
        "Update existing debug logs to include correlation ID"
      ],
      "complexity_score": 4
    },
    {
      "id": "task_3",
      "title": "Complete Spotify Authentication Interface",
      "description": "Finish frontend Spotify OAuth flow UI as listed in Medium Priority (IN PROGRESS).",
      "priority": "medium",
      "estimated_time": "45-60 minutes",
      "files_to_modify": [
        "src/components/SpotifyAuth.jsx",
        "src/pages/Settings.jsx"
      ],
      "implementation_steps": [
        "Create OAuth button and modal with loading states",
        "Handle callback URL parsing and token storage",
        "Add error handling and user feedback",
        "Test end-to-end flow with Spotify test credentials",
        "Style with existing glassmorphism theme"
      ],
      "complexity_score": 5
    },
    {
      "id": "task_4",
      "title": "Add MongoDB Compound Indexes for Analytics",
      "description": "Implement compound indexes for M4 analytics queries to improve dashboard performance.",
      "priority": "medium",
      "estimated_time": "30-45 minutes",
      "files_to_modify": [
        "db/migrations/indexes.js",
        "src/services/analytics.js"
      ],
      "implementation_steps": [
        "Identify common query patterns from existing analytics endpoints",
        "Create compound indexes on {userId:1, timestamp:-1, provider:1}",
        "Add TTL index on telemetry collections (e.g., expire after 30 days)",
        "Test query performance before/after with explain()",
        "Add index creation to deployment script"
      ],
      "complexity_score": 4
    },
    {
      "id": "task_5",
      "title": "Implement Basic Chat Interface Toggle",
      "description": "Add simple context toggle button to existing chat UI for M2 context-aware conversations.",
      "priority": "medium",
      "estimated_time": "20-30 minutes",
      "files_to_modify": [
        "src/components/ChatInterface.jsx"
      ],
      "implementation_steps": [
        "Add toggle switch for 'Include Context' in chat settings",
        "Pass context flag to backend chat endpoint",
        "Update backend to conditionally attach user context when enabled",
        "Add tooltip explaining what context includes (mood/history)"
      ],
      "complexity_score": 3
    },
    {
      "id": "task_6",
      "title": "Add Quality Scripts to package.json",
      "description": "Ensure all quality scripts from recent improvements are properly added and documented.",
      "priority": "low",
      "estimated_time": "15-20 minutes",
      "files_to_modify": [
        "package.json"
      ],
      "implementation_steps": [
        "Verify/add 'lint', 'security:audit', 'quality:check' scripts",
        "Add script descriptions in comments",
        "Test all scripts run successfully",
        "Update README with usage instructions"
      ],
      "complexity_score": 1
    }
  ],
  "next_research_topics": [
    "Circuit breaker implementation patterns for Node.js LLM providers",
    "MongoDB optimal indexing strategies for time-series analytics data",
    "Lightweight request tracing without full OpenTelemetry",
    "Spotify Web API audio features extraction for mood detection"
  ],
  "completion_percentage": 82
}